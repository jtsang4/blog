---
author: James Tsang
pubDatetime: 2022-02-05T03:43:52.737Z
title: å¦‚ä½•éƒ¨ç½²è‡ªæŒçš„ bitwarden å¯†ç ç®¡ç†å™¨
postSlug: how-to-deploy-your-own-bitwarden-password-manager
featured: true
ogImage: https://user-images.githubusercontent.com/53733092/215771435-25408246-2309-4f8b-a781-1f3d93bdf0ec.png
tags:
  - Linux
  - Service
description: åœ¨ä½¿ç”¨è®¸å¤šç½‘ç«™ã€åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç”¨å¸å·å¯†ç æ¥ç™»å½•ã€‚å¸å·å¯èƒ½æ˜¯æ‰‹æœºå·ã€é‚®ç®±æˆ–ç”¨æˆ·åï¼Œå¯†ç ä¸ºäº†é˜²æ­¢è¢«ç›—ä»¥åæ‰€æœ‰å¸å·éƒ½è¢«ç›—ï¼Œä¸€èˆ¬ä¹Ÿä¸å»ºè®®åªä½¿ç”¨ä¸€ä¸ªå¯†ç ï¼Œéœ€è¦åœ¨ä¸åŒç½‘ç«™ç”¨ä¸åŒçš„å¯†ç ã€‚éšç€æ³¨å†Œçš„ç½‘ç«™è¶Šæ¥è¶Šå¤šï¼Œç®¡ç†è¿™äº›å¸å·å¯†ç å°±æˆäº†é—®é¢˜ï¼Œå› æ­¤å‰å‡ å¹´å¼€å§‹å‡ºç°äº†ä¸€äº›å¯†ç ç®¡ç†å™¨ï¼Œå®ƒä»¬åœ¨ä½ ç™»å½•ç½‘ç«™æˆ–åº”ç”¨æ—¶ä¼šæç¤ºä½ è¦ä¸è¦è®°ä½å¯†ç ï¼Œåœ¨ä¸‹æ¬¡å¡«å†™æ—¶ä¼šæç¤ºæˆ–è€…å¸®ä½ è¡¥å…¨ä¹‹å‰è®°å½•è¿‡çš„å¸å·å¯†ç ã€‚ä¸€äº›å¸¸è§çš„å¯†ç ç®¡ç†å™¨æœ‰ Chrome æµè§ˆå™¨çš„ Google è´¦æˆ·ã€å®‰å“ç³»ç»Ÿçš„â€œå¸å·ä¸åŒæ­¥â€ã€‚æ›´åŠ ä¸“ä¸šçš„å¯†ç ç®¡ç†å™¨æœ‰ 1password, lastpass, bitwarden ç­‰ï¼Œå®ƒä»¬æœ‰æµè§ˆå™¨ç«¯ã€æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥å…¨æ–¹ä½åœ°ä¸ºæˆ‘ä»¬æä¾›å¯†ç ç®¡ç†æœåŠ¡ã€‚
---

# å¦‚ä½•éƒ¨ç½²è‡ªæŒçš„ bitwarden å¯†ç ç®¡ç†å™¨

# ä»€ä¹ˆæ˜¯å¯†ç ç®¡ç†å™¨

åœ¨ä½¿ç”¨è®¸å¤šç½‘ç«™ã€åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç”¨å¸å·å¯†ç æ¥ç™»å½•ã€‚å¸å·å¯èƒ½æ˜¯æ‰‹æœºå·ã€é‚®ç®±æˆ–ç”¨æˆ·åï¼Œå¯†ç ä¸ºäº†é˜²æ­¢è¢«ç›—ä»¥åæ‰€æœ‰å¸å·éƒ½è¢«ç›—ï¼Œä¸€èˆ¬ä¹Ÿä¸å»ºè®®åªä½¿ç”¨ä¸€ä¸ªå¯†ç ï¼Œéœ€è¦åœ¨ä¸åŒç½‘ç«™ç”¨ä¸åŒçš„å¯†ç ã€‚

éšç€æ³¨å†Œçš„ç½‘ç«™è¶Šæ¥è¶Šå¤šï¼Œç®¡ç†è¿™äº›å¸å·å¯†ç å°±æˆäº†é—®é¢˜ï¼Œå› æ­¤å‰å‡ å¹´å¼€å§‹å‡ºç°äº†ä¸€äº›å¯†ç ç®¡ç†å™¨ï¼Œå®ƒä»¬åœ¨ä½ ç™»å½•ç½‘ç«™æˆ–åº”ç”¨æ—¶ä¼šæç¤ºä½ è¦ä¸è¦è®°ä½å¯†ç ï¼Œåœ¨ä¸‹æ¬¡å¡«å†™æ—¶ä¼šæç¤ºæˆ–è€…å¸®ä½ è¡¥å…¨ä¹‹å‰è®°å½•è¿‡çš„å¸å·å¯†ç ã€‚

ä¸€äº›å¸¸è§çš„å¯†ç ç®¡ç†å™¨æœ‰ Chrome æµè§ˆå™¨çš„ Google è´¦æˆ·ã€å®‰å“ç³»ç»Ÿçš„â€œå¸å·ä¸åŒæ­¥â€ã€‚æ›´åŠ ä¸“ä¸šçš„å¯†ç ç®¡ç†å™¨æœ‰ [1password](https://1password.com/), [lastpass](https://www.lastpass.com/), [bitwarden](https://bitwarden.com/) ç­‰ï¼Œå®ƒä»¬æœ‰æµè§ˆå™¨ç«¯ã€æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥å…¨æ–¹ä½åœ°ä¸ºæˆ‘ä»¬æä¾›å¯†ç ç®¡ç†æœåŠ¡ã€‚

<aside style="margin-bottom: 32px;">
ğŸ’¡ æ³¨æ„ï¼šå»ºè®®é“¶è¡Œã€æ”¯ä»˜ç±»çš„è´¦æˆ·ä¸è¦ä½¿ç”¨å¯†ç ç®¡ç†å™¨æ¥ç®¡ç†
</aside>

# ä¸ºä»€ä¹ˆè¦è‡ªå·±éƒ¨ç½²å¯†ç ç®¡ç†å™¨

æ—¢ç„¶å·²ç»æœ‰äº†å„å¼å„æ ·çš„ä¸“ä¸šå¯†ç ç®¡ç†å™¨ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¿™é‡Œè¦æåˆ°è‡ªå·±éƒ¨ç½²å¯†ç ç®¡ç†å™¨å‘¢ï¼Ÿä¸»è¦åŸå› æ˜¯ä¸ºäº†å¯†ç æœåŠ¡çš„**å®‰å…¨å’Œç¨³å®š**ã€‚å¦‚æœæˆ‘ä»¬ä¸è‡ªå·±éƒ¨ç½²æœåŠ¡ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ç°æˆçš„å•†ä¸šäº§å“ï¼Œè¯•æƒ³ä»¥ä¸‹æƒ…å†µï¼š

- **å¯†ç ç®¡ç†å™¨æœåŠ¡å•†è¢«é»‘å®¢æ”»å‡»**ï¼šä¾‹å¦‚ [lastpass æœ€è¿‘çš„é£æ³¢](https://www.cnbeta.com/articles/tech/1219927.htm)ï¼Œå¦‚æœè¿™ç§æƒ…å†µå‘ç”Ÿå¯†ç å°±æœ‰æ³„æ¼çš„é£é™©
- **å¯†ç ç®¡ç†å™¨æœåŠ¡å•†æé«˜ä»·æ ¼**ï¼šå¤§éƒ¨åˆ†å…è´¹æœåŠ¡éƒ½æœ‰é™åˆ¶ï¼Œä¾‹å¦‚ lastpass å…è´¹è´¦æˆ·ä¸å…è®¸å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶ç™»å½•ï¼Œä¸€æ—¦è¶…è¿‡é™åˆ¶å°±è¦ä»˜è´¹ï¼Œä½œä¸ºå•†ä¸šæœåŠ¡è¿™æ˜¯å¿…ç„¶çš„ï¼Œä½†ä¸€æ—¦ä½ ä¾èµ–äº†æœåŠ¡å•†çš„äº§å“ï¼Œåç»­å®ƒå†æ¶¨ä»·åˆ°ä¸€ä¸ªä½ ä¸å¥½æ¥å—çš„ä»·æ ¼å°±è¦å¤´ç–¼äº†
- **å¯†ç ç®¡ç†å™¨æœåŠ¡å•†åœæ­¢è¿è¥**ï¼šäº‘æœåŠ¡æ€»æœ‰åœæ­¢è¿è¥çš„ä¸€å¤©ï¼Œä¸€æ—¦ä½¿ç”¨çš„æœåŠ¡å•†å®£å¸ƒåœæ­¢è¿è¥ï¼Œå…ä¸äº†å°±è¦è¿ç§»åˆ°å…¶å®ƒäº§å“ï¼Œè€Œä¸”æœåŠ¡å•†åœæ­¢è¿è¥äº†å®ƒä»¬ä¼šå¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ä¹Ÿæ— ä»å¯çŸ¥

æ‰€ä»¥ä¸ºäº†å¾—åˆ°ä¸€ä¸ªå®‰å…¨ç¨³å®šçš„å¯†ç ç®¡ç†æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±éƒ¨ç½²ä¸€ä¸ªå¯†ç ç®¡ç†å™¨ä¾›æˆ‘ä»¬è‡ªå·±æˆ–å®¶äººæœ‹å‹ä½¿ç”¨ï¼Œè‡ªå·±éƒ¨ç½²çš„æœåŠ¡å¯èƒ½ä»·æ ¼ç¨å¾®è´µä¸€ç‚¹ï¼Œä½†å¯ä»¥è§£å†³è´¦æˆ·å¯†ç ç®¡ç†ä¸­çš„æ ¸å¿ƒé—®é¢˜ï¼ˆå®‰å…¨ã€ç¨³å®šï¼‰ï¼ŒåŒæ—¶ä¹Ÿèƒ½åŠ¨æ‰‹ç©ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ã€‚

# å¦‚ä½•éƒ¨ç½²è‡ªå·±çš„å¯†ç ç®¡ç†æœåŠ¡

å¯†ç ç®¡ç†å™¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªæ˜¯æ•°æ®å’ŒæœåŠ¡ç«¯ï¼Œå¦ä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯ï¼Œå› æ­¤éœ€è¦æ‰¾ä¸€ä¸ªæ•°æ®å’ŒæœåŠ¡ç«¯å¯ä»¥ç”±æˆ‘ä»¬è‡ªå·±æ§åˆ¶æ­å»ºï¼Œå®¢æˆ·ç«¯ç°æˆå¯ç”¨çš„æ–¹æ¡ˆã€‚

å¼€æºç¤¾åŒºæ˜¯ä¸€ä¸ªå®åº“ï¼Œæœ€å¥½æ‰¾ä¸€ä¸ªå¼€æºã€ä¸»æµçš„æ–¹æ¡ˆï¼Œä¸Šé¢æåˆ°çš„ [bitwarden](https://bitwarden.com/) å°±æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é€‰æ‹©ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© bitwarden

- æ•°æ®å’ŒæœåŠ¡ç«¯å¯ä»¥è‡ªå·±æ§åˆ¶å’Œéƒ¨ç½²ï¼Œæœ‰ç°æˆçš„å®¢æˆ·ç«¯ï¼Œå¹¶æ”¯æŒé…ç½®æœåŠ¡ç«¯åœ°å€
- [bitwarden å®Œå…¨å¼€æº](https://github.com/bitwarden)ï¼Œå³ä½¿è¿™ä¸ªå›¢é˜Ÿæˆ–å…¬å¸ä¸åœ¨äº†ï¼Œæˆ‘ä»¬ä¹Ÿè¿˜å¯ä»¥ç”¨å®ƒçš„æºç æ„å»ºè‡ªå·±çš„æœåŠ¡ç«¯ã€å®¢æˆ·ç«¯
- å¼€æºç¤¾åŒºæœ‰æˆç†Ÿçš„æœåŠ¡ç«¯å®ç°([vaultwarden](https://github.com/dani-garcia/vaultwarden))å¯ç”¨ ï¼Œæ–‡æ¡£è¯¦å°½ã€éƒ¨ç½²ç®€å•

## å‡†å¤‡å·¥ä½œ

- ä¸€å° 512MB å†…å­˜ä»¥ä¸Šçš„æœåŠ¡å™¨(éœ€è¦æå‰å®‰è£…å¥½ docker å’Œ docker-composeï¼Œæ–¹æ³•è§ä¸‹æ–¹)
- ä¸€ä¸ªåŸŸå
- ï¼ˆå¯é€‰ï¼‰å›½å†…çš„æœåŠ¡å™¨å’ŒåŸŸåéœ€è¦æå‰å¤‡æ¡ˆï¼Œåœ¨å›½å†…å¯ä»¥ä¹°é˜¿é‡Œäº‘æˆ–è…¾è®¯äº‘ç°æˆçš„æœåŠ¡å™¨å’ŒåŸŸåï¼Œæ–¹ä¾¿å¤‡æ¡ˆ
- ï¼ˆå¯é€‰ï¼‰å…³ç³»å‹æ•°æ®åº“(ä¾‹å¦‚ MySQL)ï¼Œæ”¯æŒçš„æ•°æ®åº“ç±»å‹æœ‰ï¼šMySQLã€PostgreSQL, SQLite

> **å®‰è£… docker**: [https://github.com/docker/docker-install](https://github.com/docker/docker-install) æ‰§è¡Œ README é‡Œçš„ä¸€é”®å®‰è£…å‘½ä»¤è¡Œ
>
> **å®‰è£… docker-compose**: [https://docs.docker.com/compose/cli-command/#install-on-linux](https://docs.docker.com/compose/cli-command/#install-on-linux) æ‰§è¡Œ â€œinstall on linuxâ€ éƒ¨åˆ†çš„å‡ ä¸ªå‘½ä»¤è¡Œ

## é…ç½®å’Œéƒ¨ç½²

ä¸€ã€å¢åŠ ä¸€æ¡åŸŸåè§£æè®°å½•ï¼ŒæŒ‡å‘æœåŠ¡å™¨ IP

å‡å¦‚ä¹°çš„åŸŸåä¸º `[abc.xyz](http://abc.xyz)` ï¼Œå¯ä»¥å¢åŠ ä¸€æ¡ [`password.abc.xyz`](http://password.abc.xyz) çš„äºŒçº§åŸŸåè§£æè®°å½•ï¼ŒæŒ‡å‘æœåŠ¡å™¨çš„ IPï¼Œè¿™æ ·è®¿é—® `password.abc.xyz` å°±å¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬çš„æœåŠ¡å™¨

äºŒã€é…ç½®å¯åŠ¨æœåŠ¡çš„ docker-compose.yml

åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ª `docker-compose.yml` æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œé…ç½®ï¼š

å‡è®¾æˆ‘ä»¬ä½¿ç”¨äº‘æœåŠ¡å‚å•†æä¾›çš„è¿œç«¯æ•°æ®åº“ï¼ˆ**æ¨èè¿™æ ·åšï¼Œå› ä¸ºè¿œç«¯æ•°æ®åº“æ›´åŠ ç¨³å®šä¸”æ˜“äºè¿ç§»å’Œå¤‡ä»½ï¼Œä»¥åéœ€è¦éƒ¨ç½²åˆ°å…¶å®ƒæœºå™¨æ—¶ä¹Ÿå¯ä»¥ä¸åšä»»ä½•é¢å¤–æ“ä½œã€‚ç›®å‰äº‘æœåŠ¡å•†çš„æ•°æ®åº“åœ¨æœ‰æ´»åŠ¨æ—¶éå¸¸ä¾¿å®œï¼Œæ¯”å¦‚é˜¿é‡Œäº‘çš„ MySQL æ•°æ®åº“ç°åœ¨æ´»åŠ¨åªè¦ 50 å¤šä¸‰å¹´**ï¼‰ï¼Œdocker-compose.yml æ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼Œæ ¹æ® `#` åçš„æ³¨é‡Šè¯´æ˜ï¼Œæ›¿æ¢é…ç½®ä¸ºè‡ªå·±çš„é…ç½®ï¼š

```yaml
version: "3"

services:
  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    restart: always
    env_file:
      - ".env"
    volumes:
      - "vaultwarden_vol:/data/"
    environment:
      - WEBSOCKET_ENABLED=true # Enable WebSocket notifications.
      ## Had issues when using single parentheses around the mysql URL as in the plain docker example
      - "DATABASE_URL=mysql://<æ•°æ®åº“ç”¨æˆ·å>:<æ•°æ®åº“ç”¨æˆ·å¯†ç >@<æ•°æ®åº“å…¬ç½‘åœ°å€>:<æ•°æ®åº“ç«¯å£>/<æ•°æ®åº“åç§°>" # å°†<>å†…å®¹æ¢æˆè‡ªå·±çš„ï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - "ADMIN_TOKEN=<æœåŠ¡å¯åŠ¨ä»¥åçš„åå°ç®¡ç†å¯†ç >" # ä¸é…ç½®çš„è¯å¯ä»¥åˆ é™¤æœ¬é€‰é¡¹ï¼Œè¿™æ ·å°±æ²¡æœ‰åå°ç®¡ç†åŠŸèƒ½ï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - "RUST_BACKTRACE=1"

  caddy:
    image: caddy:2
    container_name: caddy
    restart: always
    ports:
      - 80:80 # Needed for the ACME HTTP-01 challenge.
      - 443:443
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile:ro
      - ./caddy-config:/config
      - ./caddy-data:/data
    environment:
      - DOMAIN=<https://password.abc.xyz> # è¿™é‡Œéœ€è¦æ¢æˆä½ è‡ªå·±çš„åŸŸåï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - EMAIL=<email address> # æ³¨å†Œ HTTPS è¯ä¹¦çš„é‚®ç®±ï¼Œå¡«ä¸€ä¸ªè‡ªå·±çš„é‚®ç®±å°±è¡Œï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - LOG_FILE=/data/access.log

volumes:
  vaultwarden_vol:
```

å‡å¦‚ä¸æƒ³ä½¿ç”¨è¿œç«¯æ•°æ®åº“ï¼Œåªæƒ³åœ¨æœåŠ¡å™¨æœ¬åœ°å¯ç”¨ä¸€ä¸ªæ•°æ®åº“å­˜æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„ docker-compose.yml é…ç½®ï¼š

```yaml
version: "3.7"
services:
  mariadb:
    image: "mariadb"
    container_name: "mariadb"
    hostname: "mariadb"
    restart: always
    env_file:
      - ".env"
    volumes:
      - "mariadb_vol:/var/lib/mysql"
      - "/etc/localtime:/etc/localtime:ro"
    environment:
      - "MYSQL_ROOT_PASSWORD=<my-secret-pw>" # MySQL æ•°æ®åº“ root ç”¨æˆ·çš„å¯†ç ï¼Œè‡ªç”±è®¾å®šï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - "MYSQL_USER=<vaultwarden_user>" # å¯†ç ç®¡ç†æ•°æ®åº“çš„ç”¨æˆ·åï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - "MYSQL_PASSWORD=<vaultwarden_pw>" # å¯†ç ç®¡ç†æ•°æ®åº“çš„ç”¨æˆ·å¯†ç ï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - "MYSQL_DATABASE=vaultwarden"

  vaultwarden:
    image: "vaultwarden/server:latest"
    container_name: "vaultwarden"
    hostname: "vaultwarden"
    restart: always
    env_file:
      - ".env"
    volumes:
      - "vaultwarden_vol:/data/"
    environment:
      ## Had issues when using single parentheses around the mysql URL as in the plain docker example
      - "DATABASE_URL=mysql://<vaultwarden_user>:<vaultwarden_pw>@mariadb/vaultwarden" # å°†ä¸Šæ–¹é…ç½®çš„åŒåå€¼å¡«åˆ°æ­¤å¤„ï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - "ADMIN_TOKEN=<some_random_token_as_per_above_explanation>" # æœåŠ¡å¯åŠ¨ä»¥åçš„åå°ç®¡ç†å¯†ç ï¼Œä¸é…ç½®çš„è¯å¯ä»¥åˆ é™¤æœ¬é€‰é¡¹ï¼Œè¿™æ ·å°±æ²¡æœ‰åå°ç®¡ç†åŠŸèƒ½
      - "RUST_BACKTRACE=1"
    ports:
      - "80:80"

  caddy:
    image: caddy:2
    container_name: caddy
    restart: always
    ports:
      - 80:80 # Needed for the ACME HTTP-01 challenge.
      - 443:443
    volumes:
      - ./Caddyfile:/etc/caddy/Caddyfile:ro
      - ./caddy-config:/config
      - ./caddy-data:/data
    environment:
      - DOMAIN=<https://password.abc.xyz> # è¿™é‡Œéœ€è¦æ¢æˆä½ è‡ªå·±çš„åŸŸåï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - EMAIL=<email address> # æ³¨å†Œ HTTPS è¯ä¹¦çš„é‚®ç®±ï¼Œå¡«ä¸€ä¸ªè‡ªå·±çš„é‚®ç®±å°±è¡Œï¼Œè¿åŒ <> ä¸€èµ·æ¢æ‰
      - LOG_FILE=/data/access.log

volumes:
  vaultwarden_vol:
  mariadb_vol:
```

ä¸‰ã€é…ç½® Caddy æœåŠ¡

[Caddy](https://caddyserver.com/) æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ web æœåŠ¡å™¨ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬ç”³è¯·åŸŸåå¯¹åº”çš„ HTTPS è¯ä¹¦ï¼Œå› ä¸ºå¯†ç ç®¡ç†æœåŠ¡éœ€è¦ä½¿ç”¨å®‰å…¨çš„ HTTPS åè®®æ‰èƒ½è®¿é—®ï¼Œå¦åˆ™å³ä½¿å¯åŠ¨äº†ä¹Ÿæ— æ³•ä½¿ç”¨ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Caddy æ¥åå‘ä»£ç†å¾—åˆ° HTTPS æœåŠ¡ã€‚

åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ª `Caddyfile` æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
{$DOMAIN}:443 {
  log {
    level INFO
    output file {$LOG_FILE} {
      roll_size 10MB
      roll_keep 10
    }
  }

  # Use the ACME HTTP-01 challenge to get a cert for the configured domain.
  tls {$EMAIL}

  # This setting may have compatibility issues with some browsers
  # (e.g., attachment downloading on Firefox). Try disabling this
  # if you encounter issues.
  encode gzip

  # Notifications redirected to the WebSocket server
  reverse_proxy /notifications/hub vaultwarden:3012

  # Proxy everything else to Rocket
  reverse_proxy vaultwarden:80 {
       # Send the true remote IP to Rocket, so that vaultwarden can put this in the
       # log, so that fail2ban can ban the correct IP.
       header_up X-Real-IP {remote_host}
  }
}
```

å››ã€å°†ä»¥ä¸Šä¸¤ä¸ªé…ç½®æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­

å¯ä»¥ä½¿ç”¨ [scp](https://www.computerhope.com/unix/scp.htm) å‘½ä»¤å°†æœ¬åœ°çš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­ï¼Œæ¨èåˆ›å»ºä¸€ä¸ªç±»ä¼¼ `~/password` çš„ç‹¬ç«‹ç›®å½•ï¼Œå•ç‹¬ç®¡ç†è¿™äº›æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Vim åˆ›å»ºã€ç¼–å†™å¯¹åº”çš„æ–‡ä»¶ï¼Œå¹¶å°†ä¸Šé¢çš„å†…å®¹å¤åˆ¶ç²˜è´´è¿›å»ã€‚

äº”ã€å¯åŠ¨æœåŠ¡

ä»¥ä¸Šé…ç½®å·¥ä½œéƒ½å®Œæˆä»¥åï¼Œè¿›å…¥åˆ°ä¸¤ä¸ªé…ç½®æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œç„¶åè¿è¡Œ `docker compose up -d` å‘½ä»¤ï¼Œå°±å¯ä»¥å¯åŠ¨æœåŠ¡å¹¶è¿æ¥æ•°æ®åº“ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å†è®¿é—®è‡ªå·±è®¾ç½®çš„åŸŸåï¼Œæ¯”å¦‚ä¾‹å­ä¸­ä½¿ç”¨çš„ â€œhttps://password.abc.xyzâ€ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„ç•Œé¢äº†ï¼š

![Untitled](./Untitled.png)

## å¦‚ä½•æ›´æ–°

åœ¨æœåŠ¡å™¨ä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```bash
docker pull vaultwarden/server:latest # æ‹‰å–æœ€æ–°é•œåƒ

docker compose restart # è¿›å…¥åˆ° docker-compose.yml çš„ç›®å½•ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤é‡å¯æœåŠ¡
```

## å¦‚ä½•å¯åŠ¨å’Œåœæ­¢

åœ¨æœåŠ¡å™¨ä¸­è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```bash
# è¿›å…¥åˆ° docker-compose.yml çš„ç›®å½•ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤å¯åŠ¨æœåŠ¡
docker compose up -d

# è¿›å…¥åˆ° docker-compose.yml çš„ç›®å½•ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤é‡å¯æœåŠ¡
docker compose restart

# è¿›å…¥åˆ° docker-compose.yml çš„ç›®å½•ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤åœæ­¢æœåŠ¡
docker compose stop

# è¿›å…¥åˆ° docker-compose.yml çš„ç›®å½•ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤åˆ é™¤æœåŠ¡
docker compose rm

# æˆ–è€…ç›´æ¥
docker compose down
```

## å¦‚ä½•å¸è½½

æŒ‰ä¸Šè¿°å‘½ä»¤åœæ­¢å¹¶ç§»é™¤æœåŠ¡åï¼Œåˆ é™¤æœåŠ¡å™¨ä¸­çš„ç›¸å…³ç›®å½•å’Œæ–‡ä»¶ï¼Œä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ `~/password` ç›®å½•ã€‚

<aside>
ğŸ’¡ ä»¥ä¸Šå†…å®¹åœ¨ vaultwarden çš„ [Wiki](https://github.com/dani-garcia/vaultwarden/wiki) æ–‡æ¡£é‡Œå¤§å¤šéƒ½æœ‰æåˆ°ï¼Œå¦‚ä½•è¿˜æœ‰ç–‘æƒ‘å¯ä»¥æŸ¥çœ‹ vaultwarden çš„ [Wiki](https://github.com/dani-garcia/vaultwarden/wiki)ã€‚

</aside>

# å¦‚ä½•ä½¿ç”¨

## æ³¨å†ŒæœåŠ¡

è®¿é—®æˆ‘ä»¬åœ¨ä¸Šé¢é…ç½®çš„åŸŸåï¼Œè§åˆ°ä¸Šå›¾ä¸­çš„ç•Œé¢åï¼Œç‚¹å‡»â€œåˆ›å»ºå¸å·â€å°±å¯ä»¥åœ¨æˆ‘ä»¬è‡ªå·±çš„æ•°æ®åº“é‡Œæ³¨å†Œä¸€ä¸ªå¸å·ã€‚

## å®¢æˆ·ç«¯è¿æ¥è‡ªæŒçš„æœåŠ¡ç«¯

ä¸€ã€ä¸‹è½½å®¢æˆ·ç«¯

[bitwarden](https://bitwarden.com/) åœ¨æµè§ˆå™¨ã€æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯éƒ½æœ‰å®¢æˆ·ç«¯ï¼Œå¯ä»¥ç‚¹å‡» [æ­¤é¡µé¢](https://bitwarden.com/download/) ä¸‹è½½éœ€è¦çš„å®¢æˆ·ç«¯

äºŒã€å®¢æˆ·ç«¯é…ç½®è¿æ¥åˆ°è‡ªæŒçš„æœåŠ¡ç«¯

ç‚¹å‡» bitwarden å®¢æˆ·ç«¯è§’è½é‡Œçš„é…ç½®æŒ‰é’®ï¼Œå¯ä»¥é…ç½®è¿æ¥çš„æœåŠ¡ç«¯åœ°å€ï¼Œå¡«ä¸Šæˆ‘ä»¬ä¹‹å‰é…ç½®çš„åœ°å€å¹¶ä¿å­˜ï¼š

![Untitled](./Untitled-1.png)

![Untitled](./Untitled-2.png)

ä¸‰ã€ç”¨ä¹‹å‰æ³¨å†Œçš„å¸å·ç™»å½•ä½¿ç”¨

ç™»å½•åå°±å¯ä»¥ä½¿ç”¨ bitwarden è¿›è¡Œå¯†ç ç®¡ç†äº†ã€‚

## ä¸ºä¸åŒçš„ç½‘ç«™ç”Ÿæˆä¸åŒçš„éšæœºå¯†ç 

å€ŸåŠ© bitwarden çš„ Generator å·¥å…·å¯ä»¥æ–¹ä¾¿åœ°ä»¥è§„åˆ™ç”Ÿæˆéšæœºå¯†ç ï¼Œè¿™æ ·åœ¨æ³¨å†Œå„ç§ç½‘ç«™å’Œåº”ç”¨æ—¶å°±å¯ä»¥ä½¿ç”¨å®Œå…¨ä¸åŒçš„å¤æ‚å¯†ç ä¹Ÿä¸ç”¨æ‹…å¿ƒå¿˜è®°ï¼š

![Untitled](./Untitled-3.png)

## ä»å…¶å®ƒå¯†ç ç®¡ç†å™¨é‡Œå¯¼å…¥

å¦‚æœä¹‹å‰æ˜¯å…¶å®ƒå¯†ç ç®¡ç†å™¨çš„ç”¨æˆ·ï¼Œbitwarden è¿˜æ”¯æŒä»å…¶å®ƒå¯†ç ç®¡ç†å™¨å¯¼å…¥ã€‚

é¦–å…ˆè®¿é—®æˆ‘ä»¬ä¹‹å‰é…ç½®çš„åŸŸåï¼Œä¾‹å¦‚ä¾‹å­ä¸­çš„ `[https://password.abc.xyz](https://password.abc.xyz)` ï¼Œç™»å½•è‡ªå·±çš„è´¦æˆ·åï¼Œè¿›å…¥åˆ°â€å·¥å…· - å¯¼å…¥å¯†ç â€åŠŸèƒ½ï¼Œå°±å¯ä»¥å°†å…¶å®ƒå¯†ç ç®¡ç†å·¥å…·å¯¼å‡ºçš„å¯†ç å¯¼å…¥åˆ°è‡ªå»ºçš„ bitwarden ä¸­äº†ï¼š

![Untitled](./Untitled-4.png)

## åå°ç®¡ç†

å¦‚æœä¹‹å‰åœ¨ docker-compose.yml ä¸­é…ç½®äº†ç®¡ç†å‘˜å¯†ç ï¼Œé‚£ä¹ˆè®¿é—® `/admin` é¡µé¢å°±å¯ä»¥è¿›å…¥åå°ç®¡ç†é¡µï¼Œè¿›è¡Œä¸€äº›åå°ç®¡ç†æ“ä½œï¼Œä¾‹å¦‚ä¾‹å­ä¸­çš„åŸŸåå¯ä»¥è®¿é—® `[https://password.abc.xyz/admin](https://password.abc.xyz/admin)` ï¼Œå³å¯è§åˆ°å¦‚ä¸‹é¡µé¢ï¼š

![Untitled](./Untitled-5.png)
